{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _Api = _interopRequireDefault(require(\"@api-platform/api-doc-parser/lib/Api\"));\n\nvar _Resource = _interopRequireDefault(require(\"@api-platform/api-doc-parser/lib/Resource\"));\n\nvar _reactAdmin = require(\"react-admin\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar hasIdentifier = function hasIdentifier(fields) {\n  return undefined !== fields.find(function (_ref) {\n    var id = _ref.id;\n    return 'http://schema.org/identifier' === id;\n  });\n};\n\nvar resolveProps = function resolveProps(props) {\n  var options = props.options;\n  var defaultInputFactory = options.inputFactory,\n      resource = options.resource;\n  var customFields = resource.editFields,\n      _resource$editProps = resource.editProps,\n      editProps = _resource$editProps === void 0 ? {} : _resource$editProps,\n      defaultFields = resource.writableFields;\n  var _editProps$options = editProps.options;\n  _editProps$options = _editProps$options === void 0 ? {} : _editProps$options;\n  var customInputFactory = _editProps$options.inputFactory;\n  return (0, _objectSpread2.default)({}, props, editProps, {\n    options: (0, _objectSpread2.default)({}, options, {\n      fields: customFields || defaultFields.filter(function (_ref2) {\n        var deprecated = _ref2.deprecated;\n        return !deprecated;\n      }),\n      inputFactory: customInputFactory || defaultInputFactory\n    })\n  });\n};\n\nvar Edit = function Edit(props) {\n  var _resolveProps = resolveProps(props),\n      _resolveProps$options = _resolveProps.options,\n      api = _resolveProps$options.api,\n      fields = _resolveProps$options.fields,\n      inputFactory = _resolveProps$options.inputFactory,\n      resource = _resolveProps$options.resource,\n      _resolveProps$addIdIn = _resolveProps.addIdInput,\n      addIdInput = _resolveProps$addIdIn === void 0 ? false === hasIdentifier(fields) : _resolveProps$addIdIn;\n\n  return _react.default.createElement(_reactAdmin.Edit, props, _react.default.createElement(_reactAdmin.SimpleForm, null, addIdInput && _react.default.createElement(_reactAdmin.DisabledInput, {\n    source: \"id\"\n  }), fields.map(function (field) {\n    return inputFactory(field, {\n      api: api,\n      resource: resource\n    });\n  })));\n};\n\nEdit.propTypes = {\n  addIdInput: _propTypes.default.bool,\n  options: _propTypes.default.shape({\n    api: _propTypes.default.instanceOf(_Api.default).isRequired,\n    inputFactory: _propTypes.default.func.isRequired,\n    resource: _propTypes.default.instanceOf(_Resource.default).isRequired\n  })\n};\nvar _default = Edit;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}