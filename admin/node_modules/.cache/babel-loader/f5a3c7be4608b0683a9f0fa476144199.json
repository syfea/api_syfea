{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _Api = _interopRequireDefault(require(\"@api-platform/api-doc-parser/lib/Api\"));\n\nvar _Resource = _interopRequireDefault(require(\"@api-platform/api-doc-parser/lib/Resource\"));\n\nvar _reactAdmin = require(\"react-admin\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _ListFilter = _interopRequireDefault(require(\"./ListFilter\"));\n\nvar _fieldFactory = require(\"./fieldFactory\");\n\nvar hasIdentifier = function hasIdentifier(fields) {\n  return undefined !== fields.find(function (_ref) {\n    var id = _ref.id;\n    return 'http://schema.org/identifier' === id;\n  });\n};\n\nvar resolveProps = function resolveProps(props) {\n  var options = props.options;\n  var defaultFieldFactory = options.fieldFactory,\n      parameterFactory = options.parameterFactory,\n      resource = options.resource;\n  var customFields = resource.listFields,\n      _resource$listProps = resource.listProps,\n      listProps = _resource$listProps === void 0 ? {} : _resource$listProps,\n      defaultFields = resource.readableFields;\n  var _listProps$options = listProps.options;\n  _listProps$options = _listProps$options === void 0 ? {} : _listProps$options;\n  var customFieldFactory = _listProps$options.fieldFactory;\n  return (0, _objectSpread2.default)({}, props, listProps, {\n    options: (0, _objectSpread2.default)({}, options, {\n      fields: customFields || defaultFields.filter(function (_ref2) {\n        var deprecated = _ref2.deprecated;\n        return !deprecated;\n      }),\n      fieldFactory: customFieldFactory || defaultFieldFactory,\n      parameterFactory: parameterFactory,\n      parameters: resource.parameters\n    })\n  });\n};\n\nvar List = function List(props) {\n  var _resolveProps = resolveProps(props),\n      hasEdit = _resolveProps.hasEdit,\n      hasShow = _resolveProps.hasShow,\n      _resolveProps$options = _resolveProps.options,\n      api = _resolveProps$options.api,\n      fieldFactory = _resolveProps$options.fieldFactory,\n      fields = _resolveProps$options.fields,\n      parameterFactory = _resolveProps$options.parameterFactory,\n      parameters = _resolveProps$options.parameters,\n      resource = _resolveProps$options.resource,\n      _resolveProps$addIdFi = _resolveProps.addIdField,\n      addIdField = _resolveProps$addIdFi === void 0 ? false === hasIdentifier(fields) : _resolveProps$addIdFi;\n\n  return _react.default.createElement(_reactAdmin.List, (0, _extends2.default)({}, props, {\n    filters: _react.default.createElement(_ListFilter.default, {\n      options: {\n        parameterFactory: parameterFactory,\n        parameters: parameters\n      }\n    })\n  }), _react.default.createElement(_reactAdmin.Datagrid, null, addIdField && _react.default.createElement(_reactAdmin.TextField, {\n    source: \"id\",\n    sortable: (0, _fieldFactory.isFieldSortable)({\n      name: 'id'\n    }, resource)\n  }), fields.map(function (field) {\n    return fieldFactory(field, {\n      api: api,\n      resource: resource\n    });\n  }), hasShow && _react.default.createElement(_reactAdmin.ShowButton, null), hasEdit && _react.default.createElement(_reactAdmin.EditButton, null)));\n};\n\nList.defaultProps = {\n  perPage: 30 // Default value in API Platform\n\n};\nList.propTypes = {\n  addIdField: _propTypes.default.bool,\n  options: _propTypes.default.shape({\n    api: _propTypes.default.instanceOf(_Api.default).isRequired,\n    fieldFactory: _propTypes.default.func.isRequired,\n    parameterFactory: _propTypes.default.func.isRequired,\n    listProps: _propTypes.default.object,\n    resource: _propTypes.default.instanceOf(_Resource.default).isRequired\n  }),\n  perPage: _propTypes.default.number,\n  hasEdit: _propTypes.default.bool.isRequired,\n  hasShow: _propTypes.default.bool.isRequired\n};\nvar _default = List;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}