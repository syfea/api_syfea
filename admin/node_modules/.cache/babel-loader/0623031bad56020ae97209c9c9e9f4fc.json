{"ast":null,"code":"import { AUTH_LOGIN, AUTH_LOGOUT } from 'react-admin';\nexport default ((type, params) => {\n  if (type === AUTH_LOGIN) {\n    const username = params.username,\n          password = params.password;\n    const request = new Request('http://www.apisyfea.local/login_check', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        password\n      }),\n      headers: new Headers({\n        'Content-Type': 'application/json'\n      })\n    });\n    return fetch(request).then(response => {\n      if (response.status < 200 || response.status >= 300) {\n        throw new Error(response.statusText);\n      }\n\n      return response.json();\n    }).then(({\n      token\n    }) => {\n      localStorage.setItem('token', token);\n    });\n  }\n\n  if (type === AUTH_LOGOUT) {\n    localStorage.removeItem('token');\n    return Promise.resolve();\n  }\n\n  return Promise.resolve();\n});","map":{"version":3,"sources":["/var/www/html/api_syfea/admin/src/authProvider.js"],"names":["AUTH_LOGIN","AUTH_LOGOUT","type","params","username","password","request","Request","method","body","JSON","stringify","headers","Headers","fetch","then","response","status","Error","statusText","json","token","localStorage","setItem","removeItem","Promise","resolve"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,WAArB,QAAwC,aAAxC;AAEA,gBAAe,CAACC,IAAD,EAAOC,MAAP,KAAkB;AAC7B,MAAID,IAAI,KAAKF,UAAb,EAAyB;AAAA,UACbI,QADa,GACUD,MADV,CACbC,QADa;AAAA,UACHC,QADG,GACUF,MADV,CACHE,QADG;AAErB,UAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAY,uCAAZ,EAAqD;AACjEC,MAAAA,MAAM,EAAE,MADyD;AAEjEC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEP,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAf,CAF2D;AAGjEO,MAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AAAE,wBAAgB;AAAlB,OAAZ;AAHwD,KAArD,CAAhB;AAKA,WAAOC,KAAK,CAACR,OAAD,CAAL,CACFS,IADE,CACGC,QAAQ,IAAI;AACd,UAAIA,QAAQ,CAACC,MAAT,GAAkB,GAAlB,IAAyBD,QAAQ,CAACC,MAAT,IAAmB,GAAhD,EAAqD;AACjD,cAAM,IAAIC,KAAJ,CAAUF,QAAQ,CAACG,UAAnB,CAAN;AACH;;AACD,aAAOH,QAAQ,CAACI,IAAT,EAAP;AACH,KANE,EAOFL,IAPE,CAOG,CAAC;AAAEM,MAAAA;AAAF,KAAD,KAAe;AACjBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACH,KATE,CAAP;AAUH;;AACD,MAAInB,IAAI,KAAKD,WAAb,EAA0B;AACtBqB,IAAAA,YAAY,CAACE,UAAb,CAAwB,OAAxB;AACA,WAAOC,OAAO,CAACC,OAAR,EAAP;AACH;;AACD,SAAOD,OAAO,CAACC,OAAR,EAAP;AACH,CAxBD","sourcesContent":["import { AUTH_LOGIN, AUTH_LOGOUT } from 'react-admin';\n\nexport default (type, params) => {\n    if (type === AUTH_LOGIN) {\n        const { username, password } = params;\n        const request = new Request('http://www.apisyfea.local/login_check', {\n            method: 'POST',\n            body: JSON.stringify({ username, password }),\n            headers: new Headers({ 'Content-Type': 'application/json' }),\n        })\n        return fetch(request)\n            .then(response => {\n                if (response.status < 200 || response.status >= 300) {\n                    throw new Error(response.statusText);\n                }\n                return response.json();\n            })\n            .then(({ token }) => {\n                localStorage.setItem('token', token);\n            });\n    }\n    if (type === AUTH_LOGOUT) {\n        localStorage.removeItem('token');\n        return Promise.resolve();\n    }\n    return Promise.resolve();\n};\n"]},"metadata":{},"sourceType":"module"}